<!-- pages/map/index.wxml -->
<view class="map-container">
  <!-- èƒŒæ™¯åœ†ç¯ -->
  <view class="background-rings">
    <view class="ring ring-1"></view>
    <view class="ring ring-2"></view>
    <view class="ring ring-3"></view>
  </view>

  <!-- ç”¨æˆ·ä¸­å¿ƒç‚¹ -->
  <view class="user-center">
    <view class="user-dot">
      <text class="location-icon">ğŸ“</text>
    </view>
    <view class="user-label">
      <text>ä½ åœ¨è¿™é‡Œ (æ¨¡ç³Šä½ç½®)</text>
    </view>
  </view>

  <!-- åœ°å›¾ç‚¹ -->
  <view class="map-points">
    <view
      wx:for="{{points}}"
      wx:key="id"
      class="map-point {{item.type}}"
      style="transform: translate({{item.x}}px, {{item.y}}px)"
      bindtap="selectPoint"
      data-id="{{item.id}}"
    >
      <view class="point-dot"></view>
    </view>
  </view>

  <!-- åº•éƒ¨ä¿¡æ¯é¢æ¿ -->
  <view wx:if="{{selectedPoint}}" class="bottom-sheet">
    <view class="sheet-header">
      <view class="sheet-info">
        <text class="sheet-title">
          {{selectedPoint.type === 'helper' ? 'é™„è¿‘çš„å¸®åŠ©è€…' : 'é™„è¿‘çš„æ±‚åŠ©è€…'}}
        </text>
        <text class="sheet-distance">è·ç¦»çº¦ {{selectedPoint.distance}} ç±³</text>
      </view>
      <view class="close-btn" bindtap="closeBottomSheet">
        <text>âœ•</text>
      </view>
    </view>

    <view class="sheet-tags">
      <text class="tag">
        {{selectedPoint.type === 'helper' ? 'å¯æä¾›: å«ç”Ÿå·¾' : 'æ€¥éœ€: çº¸å·¾'}}
      </text>
    </view>

    <button class="contact-btn" bindtap="contactPerson">
      {{selectedPoint.type === 'helper' ? 'è”ç³»å¥¹' : 'æˆ‘å¯ä»¥æä¾›å¸®åŠ©'}}
    </button>
  </view>
</view>